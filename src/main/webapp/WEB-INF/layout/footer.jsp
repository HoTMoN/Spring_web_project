<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib prefix="tiles" uri="http://tiles.apache.org/tags-tiles" %>
    <footer class="ftco-footer ftco-bg-dark ftco-section">
      <div class="container">
        <div class="row mb-5">
          <div class="col-md">
            <div class="ftco-footer-widget mb-4">
              <h2 class="ftco-heading-2">tour place</h2>
              <p> 시군구별 관광지 기후 지수<br/> 기상지수예보<br/> (식중독지수, 체감온도,자외선지수)<br/>동네예보 (기온,습도)<br/>여행 플래너 </p>
              <ul class="ftco-footer-social list-unstyled float-md-left float-lft mt-5">
                <li class="ftco-animate"><a href="#"><span class="icon-twitter"></span></a></li>
                <li class="ftco-animate"><a href="#"><span class="icon-facebook"></span></a></li>
                <li class="ftco-animate"><a href="#"><span class="icon-instagram"></span></a></li>
              </ul>
            </div>
          </div>
          <div class="col-md">
            <div class="ftco-footer-widget mb-4 ml-md-5">
              <h2 class="ftco-heading-2">Information</h2>
              <ul class="list-unstyled">
                <li><a href="#" class="py-2 d-block">About</a></li>
                <li><a href="#" class="py-2 d-block">Tour</a></li>
                <li><a href="#" class="py-2 d-block">Review</a></li>
                <li><a href="#" class="py-2 d-block">Contact</a></li>
                <li><a href="#" class="py-2 d-block">Planner</a></li>
                
              </ul>
            </div>
          </div>
          <div class="col-md">
             <div class="ftco-footer-widget mb-4">
              <h2 class="ftco-heading-2">Customer Support</h2>
              <ul class="list-unstyled">
                <li><a href="#" class="py-2 d-block">FAQ</a></li>
                <li><a href="#" class="py-2 d-block">How it works</a></li>
                <li><a href="#" class="py-2 d-block">Contact Us</a></li>
              </ul>
            </div>
          </div>
          <div class="col-md">
            <div class="ftco-footer-widget mb-4">
            	<h2 class="ftco-heading-2">Have a Questions?</h2>
            	<div class="block-23 mb-3">
	              <ul>
	                <li><span class="icon icon-map-marker"></span><span class="text">서울특별시 강남주 언주로 508, 14층<br/> (역삼동, 서울상록회관)</span></li>
	                <li><a href="#"><span class="icon icon-phone"></span><span class="text">1544-9001</span></a></li>
	                <li><a href="#"><span class="icon icon-envelope"></span><span class="text">1조@websemiproject.com</span></a></li>
	              </ul>
	            </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12 text-center">

            <p><%-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --%>
 				Copyright &copy;<script>document.write(new Date().getFullYear());</script> 1조 화이팅 <i class="icon-heart" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">준범</a>
  				<%-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --%></p>
          </div>
        </div>
      </div>
    </footer>
    
  

  <%-- loader --%>
  <div id="ftco-loader" class="show fullscreen"><svg class="circular" width="48px" height="48px"><circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee"/><circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10" stroke="#F96D00"/></svg></div>


		<!-- Main Script -->
	    <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
		<script src="https://code.jquery.com/jquery-migrate-3.0.1.min.js" integrity="sha256-F0O1TmEa4I8N24nY0bya59eP6svWcshqX1uzwaWC4F4=" crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js" integrity="sha512-ahmSZKApTDNd3gVuqL5TQ3MBTj8tL5p2tYV05Xxzcfu6/ecvt1A0j6tfudSGBVuteSoTRMqMljbfdU0g2eDNUA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.0/jquery.waypoints.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/stellar.js/0.6.2/jquery.stellar.min.js" integrity="sha512-PNXCBnFH9wShbV+mYnrfo0Gf3iSREgBWmYAoMIfc+Z83vVq3Nu4yxBk6j+BZ40ZIhtW3WlTQdBvW3AYLAnlgpA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/jquery.magnific-popup.min.js" integrity="sha512-IsNh5E3eYy3tr/JiX2Yx4vsCujtkhwl7SLqgnwLNgf04Hrt9BT9SXlLlZlWx+OK4ndzAoALhsMNcCmkggjZB1w==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-animateNumber/0.0.14/jquery.animateNumber.min.js" integrity="sha512-WY7Piz2TwYjkLlgxw9DONwf5ixUOBnL3Go+FSdqRxhKlOqx9F+ee/JsablX84YBPLQzUPJsZvV88s8YOJ4S/UA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js" integrity="sha512-T/tUfKSV1bihCnd+MxKD0Hm1uBBroVYBOYSk1knyvQ9VyZJpc/ALb4P0r6ubwVPSGB2GvjeoMAJJImBG12TiaQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.1/owl.carousel.min.js" integrity="sha512-R5COAyFZ7B88RiuYmY3RPq1uXLFAmRQoGhNF5NU+HaaROvzZ773eLF1guAY8lHM0jNRwgFUVuHWbfPacHXbfDQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js" integrity="sha512-A7AYk1fGKX6S2SsHywmPkrnzTZHrgiVT7GcQkLGDe2ev0aWb8zejytzS8wjo7PGEXKqJOrjQ4oORtnimIRZBtw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
		<script src="https://cdn.jsdelivr.net/npm/scrollax@1.0.0/scrollax.min.js"></script>
		<script src="/tour/common/js/main.js"></script>
		<script>
			$(document).ready(sigunguChange);
			$("#area").change(sigunguChange);
			
			function sigunguChange() {
				var selectedMetropol2 = $("#area").val();
				
				var content = "";
				//console.log(selectedMetropol2);
				$.ajax({
					url : "/web-semi-project/ajax/ajaxStateCity.jsp",
					data: {"metropol2":selectedMetropol2},
					type : 'get',
					success : function(data) {
						//console.log(data);
						var dataSub = data.substr(2, data.length-4);
						var dataSubSp = dataSub.split('}, {');
						
						content += "<option value='' disabled selected hidden>시/군/구</option>";
						content += "<option value=''>전체</option>";
						for (var i=1; i<dataSubSp.length; i++) {
							var dataSubSpSp = dataSubSp[i].split(', ');
							var stateCity = dataSubSpSp[0].split('=');
							var sigunguCode = dataSubSpSp[1].split('=');
							//console.log(dataSubSp[i]);
							content += "<option class='' value='"+stateCity[1]+"'>"+stateCity[1]+"</option>";
						}
						$('#sigungu').html(content);
					}
				})
				$("#sigungu").removeClass('select-option');
			}
			</script>
			
			<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=d1fec8d8766a8a6cd6d1d7a100d376e0&libraries=services"></script>
			<script> // map 불러오기
			document.addEventListener('DOMContentLoaded', function () {
				var GEBImap = document.getElementById('map');
				var maploadDebounce = null;
				
				function mapload() {
					if (maploadDebounce) {
						clearTimeout(maploadDebounce);
					}
					
					maploadDebounce = setTimeout(function () {
						//console.log(window.innerWidth);
						//console.log(GEBImap);
						
						if ( window.innerWidth >= 992 ) {
							//console.log("992 이상");
							while ( GEBImap.hasChildNodes() ) { GEBImap.removeChild( GEBImap.firstChild ); }
							setMap();
						} else if ( window.innerWidth < 992 ) {
							//console.log("992 미만");
							while ( GEBImap.hasChildNodes() ) { GEBImap.removeChild( GEBImap.firstChild ); }
						}
					}, 100);
					
				}
				
				window.addEventListener('resize', mapload);
				window.addEventListener('orientationChange', mapload);
				window.addEventListener('load', mapload);
			});
			
			function setMap() {
				var mapContainer = document.getElementById('map'), // 지도를 표시할 div 
				mapOption = {
					center: new kakao.maps.LatLng(35.9, 127.75), // 지도의 중심좌표
					level: 14 // 지도의 확대 레벨
				};
				
				kakao.maps.disableHD();
				var map = new kakao.maps.Map(mapContainer, mapOption),
					customOverlay = new kakao.maps.CustomOverlay({}),
					infowindow = new kakao.maps.InfoWindow({removable: true});	
					
				// 마우스 드래그와 모바일 터치를 이용한 지도 이동을 막는다
				map.setDraggable(false);		
		
				// 마우스 휠과 모바일 터치를 이용한 지도 확대, 축소를 막는다
				map.setZoomable(false);   
				
				DrawPolygon();
				
				function DrawPolygon() {
					$.getJSON("metropolygon.json", function(geojson) {
						var data = geojson.features;
						var name = '';
						var code = '';
						
						$.each(data, function(index, val) {
							name = val.properties.CTP_KOR_NM;
							code = val.properties.CTPRVN_CD;
							
							if (val.geometry.type == "MultiPolygon") {
								displayArea(name, code, val.geometry.coordinates, true);
							} else {
								displayArea(name, code, val.geometry.coordinates, false);
							}
						});
					});
				}
				
				function makePolygon(coordinates) {
					var polygonPath = [];
					
					$.each(coordinates[0], function(index, coordinate) {
						polygonPath.push(new kakao.maps.LatLng(coordinate[1], coordinate[0]));
					});
					
					return new kakao.maps.Polygon({
						path: polygonPath,
						strokeWeight: 1,
						strokeColor: '#ababab',
						strokeOpacity: 1,
						fillColor: '#ffffff',
						fillOpacity: 1
					});
				}
				
				function makeMultiPolygon(coordinates) {
					var polygonPath = [];
					
					$.each(coordinates, function(index, val2) {
						var coordinates2 = [];
						
						$.each(val2, function(index2, coordinate) {
							coordinates2.push(new kakao.maps.LatLng(coordinate[1], coordinate[0]));
						});
						
						polygonPath.push(coordinates2);
					});
					
					return new kakao.maps.Polygon({
						path: polygonPath,
						strokeWeight: 1,
						strokeColor: '#ababab',
						strokeOpacity: 1,
						fillColor: '#ffffff',
						fillOpacity: 1
					});
				}
				
				function displayArea(name, code, coordinates, multi) {
					var polygon;
					var metName = name;
					if (multi) {
						polygon = makeMultiPolygon(coordinates);
					} else {
						polygon = makePolygon(coordinates);
					}
					
					polygon.setMap(map);
					
					// 지역명을 표시하는 커스텀오버레이를 지도위에 표시합니다
					kakao.maps.event.addListener(polygon, 'mouseover', function(mouseEvent) {
						polygon.setOptions({fillColor: '#a1afc1'});
						
						customOverlay.setContent('<div class="area">' + metName + '</div>');
						customOverlay.setPosition(mouseEvent.latLng); 
						customOverlay.setMap(map);
					});
					
					// 다각형에 mousemove 이벤트를 등록하고 이벤트가 발생하면 커스텀 오버레이의 위치를 변경
					kakao.maps.event.addListener(polygon, 'mousemove', function(mouseEvent) {
						customOverlay.setPosition(mouseEvent.latLng); 
					});
		
					// 다각형에 mouseout 이벤트를 등록하고 이벤트가 발생하면 폴리곤의 채움색을 원래색으로 변경
					// 커스텀 오버레이를 지도에서 제거합니다 
					kakao.maps.event.addListener(polygon, 'mouseout', function() {
						polygon.setOptions({fillColor: '#ffffff'});
						customOverlay.setMap(null);
					}); 
					
					// 다각형에 click 이벤트를 등록하고 이벤트가 발생하면 페이지 이동
					kakao.maps.event.addListener(polygon, 'click', function(mouseEvent) {
						location.href='#'+ metName;
					});
				}	
			}	
	</script>
  </body>
</html>